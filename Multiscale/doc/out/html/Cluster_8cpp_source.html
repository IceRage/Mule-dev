<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Multiscale: /home/ovidiu/Repositories/git/multiscale/Multiscale/modules/analysis/spatial/src/Cluster.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multiscale
   &#160;<span id="projectnumber">0.6.25</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Cluster_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/ovidiu/Repositories/git/multiscale/Multiscale/modules/analysis/spatial/src/Cluster.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Cluster_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="CircularityMeasure_8hpp.html">multiscale/analysis/spatial/CircularityMeasure.hpp</a>&quot;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="Cluster_8hpp.html">multiscale/analysis/spatial/Cluster.hpp</a>&quot;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;<a class="code" href="InvalidInputException_8hpp.html">multiscale/exception/InvalidInputException.hpp</a>&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;<a class="code" href="Geometry2D_8hpp.html">multiscale/util/Geometry2D.hpp</a>&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;<a class="code" href="MinEnclosingTriangleFinder_8hpp.html">multiscale/util/MinEnclosingTriangleFinder.hpp</a>&quot;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;<a class="code" href="StringManipulator_8hpp.html">multiscale/util/StringManipulator.hpp</a>&quot;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="keyword">using namespace </span>multiscale::analysis;
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 
<a name="l00011"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aee7feb1d599d4c8fda6c3ee83e86ba81">00011</a> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aee7feb1d599d4c8fda6c3ee83e86ba81">Cluster::Cluster</a>() {
<a name="l00012"></a>00012     <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a3af6980def4fbfea38ccd86620f127f8" title="Initialisation function for the class.">initialise</a>();
<a name="l00013"></a>00013 }
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a4bddfc88ac859610acab15dd12851b58">00015</a> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a4bddfc88ac859610acab15dd12851b58">Cluster::~Cluster</a>() {}
<a name="l00016"></a>00016 
<a name="l00017"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a2bc85629ab2bd6d01c6d2df3d79ba497">00017</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a2bc85629ab2bd6d01c6d2df3d79ba497" title="Add a new entity to the cluster.">Cluster::addEntity</a>(<span class="keyword">const</span> <a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a> &amp;entity) {
<a name="l00018"></a>00018     <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>.push_back(entity);
<a name="l00019"></a>00019 
<a name="l00020"></a>00020     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a2fc7e2c00fcd725cb247b27c69726c8b">updateFlag</a> = <span class="keyword">true</span>;
<a name="l00021"></a>00021 }
<a name="l00022"></a>00022 
<a name="l00023"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#ab28150a739c35d66874c219fd38b462b">00023</a> vector&lt;Point2f&gt; <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#ab28150a739c35d66874c219fd38b462b" title="Get the minimum area enclosing triangle.">Cluster::getMinAreaEnclosingTriangle</a>() {
<a name="l00024"></a>00024     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a151cd8c0fdfbc98cfd0adc99b9943369" title="Update the values of all measures if required.">updateMeasuresIfRequired</a>();
<a name="l00025"></a>00025 
<a name="l00026"></a>00026     <span class="keywordflow">return</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a7678d48581202c3ecc3f1283a1730dfa">minAreaEnclosingTriangle</a>;
<a name="l00027"></a>00027 }
<a name="l00028"></a>00028 
<a name="l00029"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a6417e3328622a848a7dedeebb5821750">00029</a> RotatedRect <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a6417e3328622a848a7dedeebb5821750" title="Get the minimum area enclosing rectangle.">Cluster::getMinAreaEnclosingRect</a>() {
<a name="l00030"></a>00030     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a151cd8c0fdfbc98cfd0adc99b9943369" title="Update the values of all measures if required.">updateMeasuresIfRequired</a>();
<a name="l00031"></a>00031 
<a name="l00032"></a>00032     <span class="keywordflow">return</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aeb032303a79c6bd43385fcaad9c50742">minAreaEnclosingRect</a>;
<a name="l00033"></a>00033 }
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a4d93f85faf929336818248e1fd604fb6">00035</a> Point2f <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a4d93f85faf929336818248e1fd604fb6" title="Get the minimum area enclosing circle centre.">Cluster::getMinAreaEnclosingCircleCentre</a>() {
<a name="l00036"></a>00036     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a151cd8c0fdfbc98cfd0adc99b9943369" title="Update the values of all measures if required.">updateMeasuresIfRequired</a>();
<a name="l00037"></a>00037 
<a name="l00038"></a>00038     <span class="keywordflow">return</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a47e672060b4025dcd07ebb9c5fd99f0c">minAreaEnclosingCircleCentre</a>;
<a name="l00039"></a>00039 }
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aecf5fa56fa21e3b22130242694be744f">00041</a> <span class="keywordtype">float</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aecf5fa56fa21e3b22130242694be744f" title="Get the minimum area enclosing circle radius.">Cluster::getMinAreaEnclosingCircleRadius</a>() {
<a name="l00042"></a>00042     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a151cd8c0fdfbc98cfd0adc99b9943369" title="Update the values of all measures if required.">updateMeasuresIfRequired</a>();
<a name="l00043"></a>00043 
<a name="l00044"></a>00044     <span class="keywordflow">return</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a070994481884a4c7f5aa4879ce7b0568">minAreaEnclosingCircleRadius</a>;
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aedd64d46ad3ea61ce7bb76be1f0906e6">00047</a> vector&lt;Entity&gt; <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aedd64d46ad3ea61ce7bb76be1f0906e6" title="Get the collection of underlying entities.">Cluster::getEntities</a>()<span class="keyword"> const </span>{
<a name="l00048"></a>00048     <span class="keywordflow">return</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>;
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a9f43161c58d9e4a97f3a33807397b255">00051</a> vector&lt;Point2f&gt; <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a9f43161c58d9e4a97f3a33807397b255" title="Get the convex hull enclosing the collection of entities&#39; contour points.">Cluster::getEntitiesConvexHull</a>() {
<a name="l00052"></a>00052     vector&lt;Point2f&gt; entitiesContourPoints = <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#adbb1a108b2ae638fbba0450c7f7fee20" title="Get the collection of entities&#39; contour points.">getEntitiesContourPoints</a>();
<a name="l00053"></a>00053     vector&lt;Point2f&gt; entitiesConvexHull;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     <span class="keywordflow">if</span> (<a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>.size() &gt; 0) {
<a name="l00056"></a>00056         convexHull(entitiesContourPoints, entitiesConvexHull, <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#ad92f43d2b14c77def3f7a70b54810dd2">CONVEX_HULL_CLOCKWISE</a>);
<a name="l00057"></a>00057     }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <span class="keywordflow">return</span> entitiesConvexHull;
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a84033ee8d583d9195abbf42d5d420915">00062</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a84033ee8d583d9195abbf42d5d420915" title="Set the values of the origin dependent members.">Cluster::setOriginDependentMembers</a>(<span class="keywordtype">double</span> distanceFromOrigin, <span class="keywordtype">double</span> angleWrtOrigin) {
<a name="l00063"></a>00063     <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a26b9c11e63bfdbfc837a35f68c5c40dd" title="Validate the origin dependent values (i.e. non-negative)">validateOriginDependentValues</a>(distanceFromOrigin, angleWrtOrigin);
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     this-&gt;distanceFromOrigin = <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a056f67b90ed41c0e6dc4df31b71ad906">distanceFromOrigin</a>;
<a name="l00066"></a>00066     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aa077aab864e659f93522863cc10824bb">angle</a> = angleWrtOrigin;
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a3af6980def4fbfea38ccd86620f127f8">00069</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a3af6980def4fbfea38ccd86620f127f8" title="Initialisation function for the class.">Cluster::initialise</a>() {
<a name="l00070"></a>00070     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a22a84312e7c497cc5fbc4d8b41d8fd45">clusterednessDegree</a> = 0;
<a name="l00071"></a>00071     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aedf807816f8c2f7cd961acfe0042fc56">density</a> = 0;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a056f67b90ed41c0e6dc4df31b71ad906">distanceFromOrigin</a> = 0;
<a name="l00074"></a>00074     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aa077aab864e659f93522863cc10824bb">angle</a> = 0;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a070994481884a4c7f5aa4879ce7b0568">minAreaEnclosingCircleRadius</a> = 0;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     this-&gt;<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a2fc7e2c00fcd725cb247b27c69726c8b">updateFlag</a> = <span class="keyword">false</span>;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a7678d48581202c3ecc3f1283a1730dfa">minAreaEnclosingTriangle</a>.clear();
<a name="l00081"></a>00081     <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>.clear();
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#af24261b08126bc2d2f51144056c6d353">00084</a> vector&lt;Point2f&gt; <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#af24261b08126bc2d2f51144056c6d353" title="Get the collection of entities&#39; centres.">Cluster::getEntitiesCentrePoints</a>() {
<a name="l00085"></a>00085     vector&lt;Point2f&gt; centrePoints;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a>&amp; entity : <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>) {
<a name="l00088"></a>00088         centrePoints.push_back(entity.getCentre());
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="keywordflow">return</span> centrePoints;
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#adbb1a108b2ae638fbba0450c7f7fee20">00094</a> vector&lt;Point2f&gt; <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#adbb1a108b2ae638fbba0450c7f7fee20" title="Get the collection of entities&#39; contour points.">Cluster::getEntitiesContourPoints</a>() {
<a name="l00095"></a>00095     vector&lt;Point2f&gt; contourPoints;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a>&amp; entity : <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>) {
<a name="l00098"></a>00098         vector&lt;Point2f&gt; entityContourPoints = entity.getContourPoints();
<a name="l00099"></a>00099 
<a name="l00100"></a>00100         contourPoints.insert(contourPoints.begin(), entityContourPoints.begin(), entityContourPoints.end());
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="keywordflow">return</span> contourPoints;
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a2279d1567eec7c0b1e29cae26cfb4d73">00106</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a2279d1567eec7c0b1e29cae26cfb4d73" title="Update the value of the clusteredness degree.">Cluster::updateClusterednessDegree</a>() {
<a name="l00107"></a>00107     <span class="keywordtype">double</span> totalAvgDistance = 0;
<a name="l00108"></a>00108 
<a name="l00109"></a>00109     <span class="keywordflow">for</span> (<a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a> &amp;e1 : <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>) {
<a name="l00110"></a>00110         <span class="keywordtype">double</span> avgDistance = 0;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112         <span class="keywordflow">for</span> (<a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a> &amp;e2 : entities) {
<a name="l00113"></a>00113             avgDistance += e1.distanceTo(e2);
<a name="l00114"></a>00114         }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116         totalAvgDistance += (entities.size() == 1) ? 0
<a name="l00117"></a>00117                                                    : avgDistance / (entities.size() - 1);
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     totalAvgDistance /= (entities.size());
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a22a84312e7c497cc5fbc4d8b41d8fd45">clusterednessDegree</a> = (totalAvgDistance != 0) ? (1 / totalAvgDistance)
<a name="l00123"></a>00123                                                   : 1;
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#ac0300d9d05b0eb3aecd5724a14c2da41">00126</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#ac0300d9d05b0eb3aecd5724a14c2da41" title="Update the value of the pile up degree.">Cluster::updateDensity</a>() {
<a name="l00127"></a>00127     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aedf807816f8c2f7cd961acfe0042fc56">density</a> = 0;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a> &amp;entity : <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>) {
<a name="l00130"></a>00130         <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aedf807816f8c2f7cd961acfe0042fc56">density</a> += entity.getPileUpDegree();
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aedf807816f8c2f7cd961acfe0042fc56">density</a> /= (entities.size());
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a3128a3b20c28619ccdd6a25208b8c83e">00136</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a3128a3b20c28619ccdd6a25208b8c83e" title="Update the value of the area.">Cluster::updateArea</a>() {
<a name="l00137"></a>00137     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a1621d5b3ece663bf4c5501940e860292">area</a> = 0;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139     <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a> &amp;entity : <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>) {
<a name="l00140"></a>00140         <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a1621d5b3ece663bf4c5501940e860292">area</a> += entity.getArea();
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142 }
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aadc520e4459f1ea6e22afd7c02d5f2ed">00144</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aadc520e4459f1ea6e22afd7c02d5f2ed" title="Update the value of the perimeter.">Cluster::updatePerimeter</a>() {
<a name="l00145"></a>00145     vector&lt;Point2f&gt; entitiesConvexHull = <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a9f43161c58d9e4a97f3a33807397b255" title="Get the convex hull enclosing the collection of entities&#39; contour points.">getEntitiesConvexHull</a>();
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#aee84039be272f902a2d871f61da47360">perimeter</a> = arcLength(entitiesConvexHull, <span class="keyword">true</span>);
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a1991d68cc9e76dab54c134df6beb59cb">00150</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a1991d68cc9e76dab54c134df6beb59cb" title="Update the point defining the centre of the cluster.">Cluster::updateCentrePoint</a>() {
<a name="l00151"></a>00151     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a647c25f9544d5537938bbadefc436634">centre</a> *= 0;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153     <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classmultiscale_1_1analysis_1_1Entity.html" title="Class for representing an entity in an image (e.g. cell, organism etc.)">Entity</a> &amp;entity : <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a820298479651328fb79d92a65f7923d6">entities</a>) {
<a name="l00154"></a>00154         <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a647c25f9544d5537938bbadefc436634">centre</a> += entity.getCentre();
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a647c25f9544d5537938bbadefc436634">centre</a>.x /= entities.size();
<a name="l00158"></a>00158     <a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a647c25f9544d5537938bbadefc436634">centre</a>.y /= entities.size();
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 
<a name="l00161"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a28efcf050af76acb01619b36505b662e">00161</a> <span class="keywordtype">double</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a28efcf050af76acb01619b36505b662e" title="Get the measure that the cluster has a triangular shape.">Cluster::isTriangularMeasure</a>() {
<a name="l00162"></a>00162     vector&lt;Point2f&gt; entitiesConvexHull = <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a9f43161c58d9e4a97f3a33807397b255" title="Get the convex hull enclosing the collection of entities&#39; contour points.">getEntitiesConvexHull</a>();
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordtype">double</span> triangleArea = <a class="code" href="classmultiscale_1_1MinEnclosingTriangleFinder.html" title="Class for computing the minimum area enclosing triangle for a given polygon.">MinEnclosingTriangleFinder</a>().<a class="code" href="classmultiscale_1_1MinEnclosingTriangleFinder.html#afe74965c39261feb7152f5556c0281cd" title="Find the minimum area enclosing triangle for the given 2D point set.">find</a>(entitiesConvexHull, <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a7678d48581202c3ecc3f1283a1730dfa">minAreaEnclosingTriangle</a>);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="keywordflow">return</span> (<a class="code" href="classmultiscale_1_1Numeric.html#a996dda9f7361be59b4614eace0b93f24" title="Check if the two numbers are equal (almost)">Numeric::almostEqual</a>(triangleArea, 0)) ? 0
<a name="l00167"></a>00167                                                    : (<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a1621d5b3ece663bf4c5501940e860292">area</a> / triangleArea);
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aca93cb46704a3e824151e99b7a53d20d">00170</a> <span class="keywordtype">double</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aca93cb46704a3e824151e99b7a53d20d" title="Get the measure that the cluster has a rectangular shape.">Cluster::isRectangularMeasure</a>() {
<a name="l00171"></a>00171     vector&lt;Point2f&gt; entitiesContourPoints = <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#adbb1a108b2ae638fbba0450c7f7fee20" title="Get the collection of entities&#39; contour points.">getEntitiesContourPoints</a>();
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aeb032303a79c6bd43385fcaad9c50742">minAreaEnclosingRect</a> = minAreaRect(entitiesContourPoints);
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="comment">// Compute the area of the minimum area enclosing rectangle</span>
<a name="l00176"></a>00176     <span class="keywordtype">double</span> rectangleArea = <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aeb032303a79c6bd43385fcaad9c50742">minAreaEnclosingRect</a>.size.height * <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aeb032303a79c6bd43385fcaad9c50742">minAreaEnclosingRect</a>.size.width;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="keywordflow">return</span> (<a class="code" href="classmultiscale_1_1Numeric.html#a996dda9f7361be59b4614eace0b93f24" title="Check if the two numbers are equal (almost)">Numeric::almostEqual</a>(rectangleArea, 0)) ? 0
<a name="l00179"></a>00179                                                     : (<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a1621d5b3ece663bf4c5501940e860292">area</a> / rectangleArea);
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
<a name="l00182"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a579730478055ae93d659f268375a492d">00182</a> <span class="keywordtype">double</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a579730478055ae93d659f268375a492d" title="Get the measure that the cluster has a circular shape.">Cluster::isCircularMeasure</a>() {
<a name="l00183"></a>00183     vector&lt;Point2f&gt; entitiesContourPoints = <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#adbb1a108b2ae638fbba0450c7f7fee20" title="Get the collection of entities&#39; contour points.">getEntitiesContourPoints</a>();
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     minEnclosingCircle(entitiesContourPoints, <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a47e672060b4025dcd07ebb9c5fd99f0c">minAreaEnclosingCircleCentre</a>, <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a070994481884a4c7f5aa4879ce7b0568">minAreaEnclosingCircleRadius</a>);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="comment">// Compute the area of the minimum area enclosing circle</span>
<a name="l00188"></a>00188     <span class="keywordtype">double</span> circleArea = <a class="code" href="classmultiscale_1_1Geometry2D.html#a7039b8bbe89283e22744c0631d597660">Geometry2D::PI</a> * <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a070994481884a4c7f5aa4879ce7b0568">minAreaEnclosingCircleRadius</a> * <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a070994481884a4c7f5aa4879ce7b0568">minAreaEnclosingCircleRadius</a>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="keywordflow">return</span> (<a class="code" href="classmultiscale_1_1Numeric.html#a996dda9f7361be59b4614eace0b93f24" title="Check if the two numbers are equal (almost)">Numeric::almostEqual</a>(circleArea, 0)) ? 0
<a name="l00191"></a>00191                                                  : (<a class="code" href="classmultiscale_1_1analysis_1_1SpatialEntityPseudo3D.html#a1621d5b3ece663bf4c5501940e860292">area</a> / circleArea);
<a name="l00192"></a>00192 }
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a0a4531d371662e9c4149c10aa115fb49">00194</a> <a class="code" href="namespacemultiscale_1_1analysis.html#a8f337e7ea9c75ff3ff2b3fe76fe7b5b6" title="Enumeration for determining the type of a pseudo 3D entity.">SpatialEntityPseudo3DType</a> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a0a4531d371662e9c4149c10aa115fb49" title="Return the type of the pseudo 3D spatial entity.">Cluster::type</a>() {
<a name="l00195"></a>00195     <span class="keywordflow">return</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#aee7feb1d599d4c8fda6c3ee83e86ba81">SpatialEntityPseudo3DType::Cluster</a>;
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a26b9c11e63bfdbfc837a35f68c5c40dd">00198</a> <span class="keywordtype">void</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a26b9c11e63bfdbfc837a35f68c5c40dd" title="Validate the origin dependent values (i.e. non-negative)">Cluster::validateOriginDependentValues</a>(<span class="keywordtype">double</span> distanceFromOrigin, <span class="keywordtype">double</span> angleWrtOrigin) {
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (!<a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a05e8593354fabd5c1ca18b6a2b19096e" title="Check if the origin dependent values are valid (i.e. non-negative)">areValidOriginDependentValues</a>(distanceFromOrigin, angleWrtOrigin)) {
<a name="l00200"></a>00200         <a class="code" href="MultiscaleException_8hpp.html#a9793f281071f3aab9a528e323279f2f4">MS_throw</a>(<a class="code" href="classmultiscale_1_1InvalidInputException.html" title="Class for representing invalid input exceptions.">InvalidInputException</a>, <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a0fa38fcc3f00730409400578829cddd8">ERR_ORIGIN_DEPENDENT_VALUES</a>);
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202 }
<a name="l00203"></a>00203 
<a name="l00204"></a><a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a05e8593354fabd5c1ca18b6a2b19096e">00204</a> <span class="keywordtype">bool</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a05e8593354fabd5c1ca18b6a2b19096e" title="Check if the origin dependent values are valid (i.e. non-negative)">Cluster::areValidOriginDependentValues</a>(<span class="keywordtype">double</span> distanceFromOrigin, <span class="keywordtype">double</span> angleWrtOrigin) {
<a name="l00205"></a>00205     <span class="keywordflow">return</span> (
<a name="l00206"></a>00206       (<a class="code" href="classmultiscale_1_1Numeric.html#a13ae1e2b35654937bed4c19e776ccdb5" title="Check if the first number is greater than or equal to the second number.">Numeric::greaterOrEqual</a>(distanceFromOrigin, 0)) &amp;&amp;
<a name="l00207"></a>00207       (<a class="code" href="classmultiscale_1_1Numeric.html#a13ae1e2b35654937bed4c19e776ccdb5" title="Check if the first number is greater than or equal to the second number.">Numeric::greaterOrEqual</a>(angleWrtOrigin, 0))
<a name="l00208"></a>00208     );
<a name="l00209"></a>00209 }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment">// Constants</span>
<a name="l00213"></a>00213 <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a546b8e93e3f1ef51a9932f8599639070">Cluster::ERR_UNDEFINED_SHAPE</a>         = <span class="stringliteral">&quot;The shape of the given cluster is undefined.&quot;</span>;
<a name="l00214"></a>00214 <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classmultiscale_1_1analysis_1_1Cluster.html#a0fa38fcc3f00730409400578829cddd8">Cluster::ERR_ORIGIN_DEPENDENT_VALUES</a> = <span class="stringliteral">&quot;The origin dependent values are invalid (i.e. negative).&quot;</span>;
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="Cluster_8cpp.html">Cluster.cpp</a>      </li>

    <li class="footer">Generated on Sat Feb 15 2014 19:26:46 for Multiscale by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
